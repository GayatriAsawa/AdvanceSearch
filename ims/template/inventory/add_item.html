{% load static %}
<title>Add New IT Device</title>
<div class="container" align="left" style="position: absolute;left:200px;margin-top:0px;width:50%">
    <div class="row" >
        <div class="col-md-10" style="position: relative;left:250px;margin-top:80px;width:50%">
            <div class="card" style="margin-top:10px; margin-right:20px;">
                <div class="card-header bg-dark text-white"><h4> Add New IT Device {{ device_form.iepl_id}}</h4></div> <br>
                    <div class="card-body">
                        <div class="col-md-12" >
                            {% if messages %}
                                {% for message in messages %}
                                    <div style="margin-top:20px" class="alert alert-{% if message.tags == 'error' %}danger{% else %}{{message.tags}}{% endif %}" role="alert">
                                        {% if message.tags == 'error' %}
                                            {% for i,j in err %}
                                                {{ i }} {{j}}
                                            {% endfor %} 
                                        {% else %}
                                            {{ message }}
                                        {% endif %}
                                    </div>
                                {% endfor %}
                            {% endif %}
                        </div>
                        {% if validError != 'error' and validError != 'First' %}    
                        {% else %}
                            <form   class="needs-validation" action="{% url 'add_device' 1  %}" method='post' novalidate>
                                {% csrf_token %}
                                <div style="margin-top:5 px; display: none;" id="danger_msg" class="alert alert-danger" role="alert">
                                </div>
            
                                <!-- {{ device_form.as_p }} -->


                                 <!-- !common Fields -->
                                <div class="dropdown">
                                    <tr>
                                        <div class="form-group">
                                            <th><label for="item_name">Item Name <span style = "color: red">* </span>:</label></th>
                                            <td>{{device_form.item_name}}</td>
                                        </div>
                                    </tr>
                                </div>
                                <div class="dropdown">
                                    <tr>
                                        <div class="form-group">
                                            <th><label for="description">Description :</label></th>
                                            <td>{{device_form.description}}</td>
                                        </div>
                                    </tr>
                                </div>
                                <p>PO Number <span style = "color: red">* </span> :</p>
                                <div class="row">
                                    <div class="dropdown col-xs-6" style="width : 30%">
                                        <tr>
                                            <div class="form-group" style="margin-left : 1.25rem">
                                                <th><label for="year">Year <span style = "color: red">* </span> :</label></th>
                                                <td>{{device_form.po_year}}</td>
                                            </div>
                                        </tr>
                                    </div>
                                    <div class="dropdown col-xs-6" style="width : 30%; margin-left: 1rem;">
                                        <tr>
                                            <div class="form-group">
                                                <th><label for="Inititials">Initials <span style = "color: red">* </span> :</label></th>
                                                <td>{{device_form.po_initials}}</td>
                                            </div>
                                        </tr>
                                    </div>
                                    <div class="dropdown col-xs-6" style="width : 30%; margin-left: 1rem;">
                                        <tr>
                                            <div class="form-group">
                                                <th><label for="Serial Number">Serial Number <span style = "color: red">* </span> :</label></th>
                                                <td>{{device_form.po_srno}}</td>
                                            </div>
                                        </tr>
                                    </div>
                                </div>

                                <div class="dropdown" style="display: none;">
                                    <tr>
                                        <div class="form-group">
                                            <th><label for="project">Project NO. <span style = "color: red">* </span>:</label></th>
                                            <td>{{device_form.project}}</td>
                                        </div>
                                    </tr>
                                </div>
                                <div class="dropdown" style="display: none;">
                                    <tr>
                                        <div class="form-group">
                                            <th><label for="project">Project Name <span style = "color: red">* </span>:</label></th>
                                            <td><input class="form-control"  type="text" id = 'projectName' value = {{project_name}}></td>
                                        </div>
                                    </tr>
                                </div>
                                <div class="dropdown" style="display: none;" >
                                    <tr>
                                        <div class="form-group">
                                            <th><label for="allocation_status">Allocation Status <span style = "color: red">* </span>:</label></th>
                                            <td>{{device_form.allocation_status}}</td>
                                        </div>
                                    </tr>
                                </div>
  
                                <!--<p>Location <span style = "color: red;">* </span> :</p> -->
                                <div class="row" style="display: none;">
                                    <div class="dropdown col-xs-6" style="width : 30%">
                                        <tr>
                                            <div class="form-group" style="margin-left : 1.25rem">
                                                <th><label for="year">Floor Number <span style = "color: red">* </span> :</label></th>
                                                <td>{{device_form.floor_number}}</td>
                                            </div>
                                        </tr>
                                    </div>
                                    
                                    <div class="dropdown col-xs-6" style="width : 30%; margin-left: 1rem;">
                                        <tr>
                                            <div class="form-group">
                                                <th><label for="Inititials">Location Type <span style = "color: red">* </span> :</label></th>
                                                <td>{{device_form.loc_type}}</td>
                                            </div>
                                        </tr>
                                    </div>
                            
                                    <div class="dropdown col-xs-6" style="width : 30%; margin-left: 1rem;">
                                        <tr>
                                            <div class="form-group">
                                                <th><label for="Serial Number">Number <span style = "color: red">* </span> :</label></th>
                                                <td>{{device_form.loc_number}}</td>
                                            </div>
                                        </tr>
                                    </div>
                                </div>
                        
                                <div class="dropdown" style="display: none;">
                                    <tr>
                                        <div class="form-group">
                                            <th><label for="employee">User Name <span style = "color: red">* </span>:</label></th>
                                            <td>{{device_form.employee}}</td>
                                        </div>
                                    </tr>
                                </div>

                                <div class="form-group">
                                    <label for="Manufacturer">Manufacturer Name <span style = "color: red">* </span>:</label>
                                    {{device_form.manufacturer}}
                                </div>

                                <div class="form-group">
                                    <label for="manufacturer_part_no">Manufacturer Part NO. <span style = "color: red">* </span>:</label>
                                    {{device_form.manufacturer_part_no}}
                                </div>
                                <!--
                                    <div class="form-group">
                                        <label for="comment">Comment :</label>
                                        {{device_form.comment}}
                                    </div>
                                -->
                                <!--<p>GIN and IQAR NO. <span style = "color: red;">* </span> :</p>-->
                                <div class="row" style="display: none;" >
                                    <div class="dropdown col-xs-6" style="width : 30%">
                                        <tr>
                                            <div class="form-group" style="margin-left : 1.25rem">
                                                <th><label for="year">Year <span style = "color: red">* </span> :</label></th>
                                                <td>{{device_form.gin_year}}</td>
                                            </div>
                                        </tr>
                                    </div>
                            
                                    <div class="dropdown col-xs-6" style="width : 30%; margin-left: 1rem;">
                                        <tr>
                                            <div class="form-group">
                                                <th><label for="Inititials">Initials <span style = "color: red">* </span> :</label></th>
                                                <td>{{device_form.gin_initials}}</td>
                                            </div>
                                        </tr>
                                    </div>
                                    <div class="dropdown col-xs-6" style="width : 30%; margin-left: 1rem;">
                                        <tr>
                                            <div class="form-group">
                                                <th><label for="Serial Number">Serial Number <span style = "color: red">* </span> :</label></th>
                                                <td>{{device_form.gin_srno}}</td>
                                            </div>
                                        </tr>
                                    </div>
                                </div>
            

            
                                <div class="form-group">
                                    <label for="to_be_reimbursed">To be Reimbursed <span style = "color: red">* </span>:</label>
                                    {{device_form.to_be_reimbursed}}
                                </div>

                                <!-- ! IT FIELDS  -->
                                <div class="dropdown">
                                    <tr><div class="form-group">
                                        <th><label for="service_tag">Service Tag <span style = "color: red">* </span>:</label></th>
                                        <td>{{device_form.service_tag}}</td>
                                    </div></tr>
                                </div>

                                <div class="dropdown">
                                    <label for="device">Device Type <span style = "color: red">* </span>:</label>
                                    {{device_form.item_type}}
                                </div><br>
                                
                                <div class="dropdown">
                                    <label for="host_name">Host Name <span style = "color: red">* </span>:</label>
                                    {{device_form.host_name}}
                                </div><br>
                                
                                <div class="dropdown">
                                    <label for="local_admin">Local Admin :</label>
                                    {{device_form.local_admin}}
                                </div><br>
            
                                <div class="dropdown">
                                    <tr><div class="form-group">
                                        <th><label for="Rent">Rent <span style = "color: red">* </span>:</label></th>
                                        <td>{{device_form.rent}}</td>
                                    </div></tr>
                                </div>

                                <div class="dropdown">
                                    <tr><div class="form-group">
                                        <th><label for="cpu_type">CPU Type <span style = "color: red">* </span>:</label></th>
                                        <td>{{device_form.cpu_type}}</td>
                                    </div></tr>
                                </div>

                                <div class="dropdown">
                                    <tr><div class="form-group">
                                        <th><label for="cpu_speed">CPU Speed :</label></th>
                                        <td>{{device_form.cpu_speed}}</td>
                                    </div></tr>
                                </div>

                                <div class="dropdown">
                                    <tr><div class="form-group">
                                        <th><label for="display_output">Display Output <span style = "color: red">* </span>:</label></th><br>
                                        <select required name = "multiple_select_disp" class="select_field_class" multiple="multiple" name="option" id="option" style="width: 100%" value = {{mulSelectDisp}}>
                                            <option value="">Enter the option</option>
                                            <option value="1-HDMI">1-HDMI</option>
                                            <option value="2-HDMI">2-HDMI</option>
                                            <option value="3-HDMI">3-HDMI</option>
                                            <option value="1-VGA">1-VGA</option>
                                            <option value="2-VGA">2-VGA</option>
                                            <option value="3-VGA">3-VGA</option>
                                            <option value="4-VGA">4-VGA</option>
                                            <option value="1-Display Port">1-Display Port</option>
                                            <option value="2-Display Port">2-Display Port</option>
                                            <option value="3-Display Port">3-Display Port</option>
                                            <option value="4-Display Port">4-Display Port</option>

                                    </select>
                                    </div></tr>
                                </div>
                                
                                <p>Monitor Make <span style = "color: red">* </span> :</p>
                                <div class="row">
                                        <div class="dropdown col-xs-5">
                                            <tr><div class="form-group" style="margin-left : 1.5rem">
                                                <th><label for="year">Manufacturer <span style = "color: red">* </span> :</label></th>
                                                <td>{{device_form.monitor_manufacturer}}</td>
                                            </div></tr>
                                        </div>

                                        <div class="dropdown col-xs-7" style="margin-left : 0.5rem">
                                            <th><label for="year">Port <span style = "color: red">* </span> :</label></th><br>
                                            <select required name = "multiple_select" class="select_field_class" multiple="multiple" name="option" id="option" style="width: 280px;">
                                                <option value="">Enter the option</option>
                                                <option value="1-HDMI">1-HDMI</option>
                                                <option value="2-HDMI">2-HDMI</option>
                                                <option value="3-HDMI">3-HDMI</option>
                                                <option value="1-VGA">1-VGA</option>
                                                <option value="2-VGA">2-VGA</option>
                                                <option value="3-VGA">3-VGA</option>
                                                <option value="4-VGA">4-VGA</option>
                                                <option value="1-Display Port">1-Display Port</option>
                                                <option value="2-Display Port">2-Display Port</option>
                                                <option value="3-Display Port">3-Display Port</option>
                                                <option value="4-Display Port">4-Display Port</option>

                                            </select>
                                        </div>
                                </div>
                
                                <div class="dropdown">
                                    <tr><div class="form-group">
                                        <th><label for="monitor_size">Monitor Size :</label></th>
                                        <td>{{device_form.monitor_size}}</td>
                                    </div></tr>
                                </div>

                                <div class="dropdown">
                                    <tr><div class="form-group">
                                        <th><label for="ram">RAM <span style = "color: red">* </span>:</label></th>
                                        <td>{{device_form.ram}}</td>
                                    </div></tr>
                                </div>

                
                                <div style="display: flex;">
                                    <p>Storage <span style = "color: red">* </span> :</p>
                                    <div class="text-right">
                                        <button style="margin-left: 2rem;" class="text-right btn btn-primary btn-sm" type="button" onclick="add()">+</button>
                                        <button style="margin-left: 1rem;" class="text-right btn btn-primary btn-sm" type="button" onclick="remove()">-</button>
                                        <input type="hidden" name ="total_chq"  value="1" id="total_chq">
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="dropdown col-xs-6" style="width : 30%">
                                        <tr><div class="form-group" style="margin-left : 1.25rem;">
                                            <th><label for="year">Storage Type <span style = "color: red">* </span> :</label></th>
                                            <td>
                                                <select required style="margin-bottom: 1rem;" name='newtype_0' class="form-control" aria-label="Type">
                                                    <option selected value="" >Storage Type</option>
                                                    <option value="H">Hard Disk Drive</option>
                                                    <option value="S">Solid State Drive</option>
                                                </select>                            
                                            </td>
                                            <div id="new_chq1"></div>
                                        </div></tr>
                                    </div>
                                    <div class="dropdown col-xs-6" style="width : 30%; margin-left: 1rem;">
                                        <tr><div class="form-group">
                                            <th><label for="memory">Memory <span style = "color: red">* </span> :</label></th>
                                            <td>
                                                <select required style="margin-bottom: 1rem;" name='newmem_0' class="form-control" aria-label="Memory">
                                                    <option selected value="">Memory</option>
                                                    <option value="128">128 GB</option>
                                                    <option value="256">256 GB</option>
                                                    <option value="512">512 GB</option>
                                                    <option value="1024">1024 GB</option>
                                                </select>
                                            </td>
                                            <div id="new_chq2"></div>
                                        </div></tr>
                                    </div>
                                </div>
                
                                <div class="dropdown">
                                    <tr><div class="form-group">
                                        <th><label for="os">OS <span style = "color: red">* </span>:</label></th>
                                        <td>{{device_form.os}}</td>
                                    </div></tr>
                                </div>

                                <div class="dropdown">
                                    <tr><div class="form-group">
                                        <th><label for="warranty_expiry_date">Warranty expiry date <span style = "color: red">* </span>:</label></th>
                                        <td>{{device_form.warranty_expiry_date}}</td>
                                    </div></tr>
                                </div>
                                <button value="Button" type="submit" class="btn btn-primary">Submit</button>

                            </form>
                        {% endif %}

                    </div>
            </div>
        </div>
    </div>
</div>

<script src="{% static 'inventory/add_it.js' %}"></script>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <!-- DJANGO SELECT2 CODE -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/css/select2.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/js/select2.min.js"></script>
  <script>
      $('.select_field_class').select2( { placeholder: "Select here", maximumSelectionSize: 100  } );
      console.log($('.select_field_class').val)
function add(){
      var new_chq_no = parseInt($('#total_chq').val())+1;
      var new_input1 = "<td style='display : flex'><select required style='margin-bottom: 1rem;white-space: nowrap; float: left; display : block' name='newtype_"+new_chq_no+"' id='newtype_"+new_chq_no+"'  class='form-control' aria-label='Type'><option selected value='' >Storage Type</option> <option value='H'>Hard Disk Drive</option> <option value='S'>Solid State Drive</option> </select></td>"

      var new_input2="<td style='display : flex'><select required style='margin-bottom: 1rem;white-space: nowrap; float: left; display : block' name='newmem_"+new_chq_no+"' id='newmem_"+new_chq_no+"' class='form-control' aria-label='Memory'><option selected value='' >Memory</option><option value='128'>128</option><option value='256'>256</option><option value='512'>512</option><option value='1024'>1024</option></select></td>"
    //   var new_input="<input type='text' id='new_"+new_chq_no+"'>";
      $('#new_chq1').append(new_input1);
      $('#new_chq2').append(new_input2);
      $('#total_chq').val(new_chq_no)
    }
    function remove(){
      var last_chq_no = $('#total_chq').val();
      if(last_chq_no>1){
        $('#newtype_'+last_chq_no).remove();
        $('#newmem_'+last_chq_no).remove();
        $('#total_chq').val(last_chq_no-1);
        
      }
    }
    
    

</script>

  <!-- <script>
      //TO VAlIDATE
    (function () {
        'use strict';
        window.addEventListener('load', function () {
            var forms = document.getElementsByClassName('needs-validation');                  
            var validation = Array.prototype.filter.call(forms, function (form) {
                form.addEventListener('submit', async function (event) {
                    for (let i of form ){
                        if (i.value == "" ){
                            $('#danger_msg').slideDown({ opacity: "show" }, "slow");
                            document.getElementById("danger_msg").innerText = "PLEASE FILL " + i.name ;
                            var element = await document.querySelector('#'+i.id);
                            // console.log(element);
                            // document.getElementById("danger_msg").className = await "alert alert-danger";
                            await element.scrollIntoView({block: "center", inline: "nearest" });
                            $(window).scrollTop(0);
                        }
                    };
                    if (form.checkValidity() === false) {                                                                       
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();
</script> -->